name: Daily OneSignal Push Notification

on:
  schedule:
    # ркжрк░рк░рлЛркЬ рк╕рк╡рк╛рк░рлЗ 9:00 AM IST (Indian Time)
    - cron: '30 8 * * *'    # 3:30 UTC = 9:00 AM IST
    
    # ркЬрлЛ ркдркоркирлЗ ркмрлАркЬрлЛ рк╕ркоркп ркЬрлЛркИркП ркдрлЛ ркЕрк╣рлАркВ ркмркжрк▓рлЛ:
    # 8:00 AM IST тЖТ '30 2 * * *'
    # 7:00 PM IST тЖТ '30 13 * * *'

jobs:
  send-notification:
    runs-on: ubuntu-latest
    steps:
      - name: Send Daily Push Notification
        run: |
          curl -X POST "https://onesignal.com/api/v1/notifications" \
            -H "Authorization: Basic ${{ secrets.ONESIGNAL_REST_KEY }}" \
            -H "Content-Type: application/json" \
            -d '{
              "app_id": "${{ secrets.ONESIGNAL_APP_ID }}",
              "included_segments": ["All"],
              "contents": {"en": "рк╕рк╛рк░рк╛ ркжрк┐рк╡рк╕ркирлА рк╢рк░рлВркЖркд ркХрк░рлЛ! ЁЯМЮ ркЖркЬркирлЛ рккрлНрк░рлЗрк░ркгрк╛ркжрк╛ркпрлА рк╕ркВркжрлЗрк╢рлЛ ркдркорк╛рк░рк╛ ркорк╛ркЯрлЗ.", "gu": "рк╕рк╛рк░рк╛ ркжрк┐рк╡рк╕ркирлА рк╢рк░рлВркЖркд ркХрк░рлЛ! ЁЯМЮ ркЖркЬркирлЛ рккрлНрк░рлЗрк░ркгрк╛ркжрк╛ркпрлА рк╕ркВркжрлЗрк╢рлЛ ркдркорк╛рк░рк╛ ркорк╛ркЯрлЗ."},
              "headings": {"en": "ркжрлИркирк┐ркХ рккрлНрк░рлЗрк░ркгрк╛ тЬи", "gu": "ркжрлИркирк┐ркХ рккрлНрк░рлЗрк░ркгрк╛ тЬи"},
              "small_icon": "ic_stat_onesignal_default",
              "android_accent_color": "FF6200EE"
            }'

      - name: Success Message
        run: echo "тЬЕ Daily notification sent successfully!"
